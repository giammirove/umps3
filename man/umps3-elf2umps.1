.\" Copyright (C) 2020 Mattia Biondi, Mikey Goldweber, Renzo Davoli
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License,
.\" as published by the Free Software Foundation, either version 3
.\" of the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston,
.\" MA 02110-1301 USA.
.\"
.\" Automatically generated by Pandoc 2.17.1.1
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "UMPS3-ELF2UMPS" "1" "December 2022" "" "General Commands Manual"
.hy
.SH NAME
.PP
\f[V]umps3-elf2umps\f[R] \[en] The umps3-elf2umps object file conversion
utility
.SH SYNOPSIS
.PP
\f[V]umps3-elf2umps\f[R] [\f[I]OPTIONS\f[R]] -k \f[I]FILE\f[R]
.PD 0
.P
.PD
\f[V]umps3-elf2umps\f[R] [\f[I]OPTIONS\f[R]] -b \f[I]FILE\f[R]
.PD 0
.P
.PD
\f[V]umps3-elf2umps\f[R] [\f[I]OPTIONS\f[R]] -a \f[I]FILE\f[R]
.SH DESCRIPTION
.PP
The command-line \f[V]umps3-elf2umps\f[R] utility is used to convert the
ELF formatted executable and object files produced by the gcc
cross-platform development tools into the \f[V].aout\f[R],
\f[V].core\f[R], and \f[V].rom\f[R] formatted files required by
\f[V]uMPS3\f[R].
.PP
A successful conversion will produce a file by the name of
\f[V]file.core.umps\f[R], \f[V]file.rom.umps\f[R], or
\f[V]file.aout.umps\f[R] accordingly.
.PP
A \f[V].stab\f[R] file is a text file containing a one-line
uMPS3-specific header and the contents of the symbol table from the
ELF-formatted input file.
It is used by the uMPS3 simulator to map \f[V].text\f[R] and
\f[V].data\f[R] locations to their symbolic, i.e.\ kernel/OS source
code, names.
Hence the automatic generation of the \f[V].stab\f[R] file whenever a
\f[V].core\f[R] file is produced.
Since \f[V].stab\f[R] files are text files one can also examine/modify
them using traditional text-processing tools.
.PP
In addition to its utility in tracking down errors in the
\f[V]umps3-elf2umps\f[R] program (which hopefully no longer exist), the
\f[I]-v\f[R] flag is of general interest since it illustrates which ELF
sections were found and produced and the resulting header data for
\f[V].core\f[R] and \f[V].aout\f[R] files.
For \f[V].rom\f[R] files, the \f[I]-v\f[R] flag also displays the BIOS
code size obtained during file conversion.
.SH OPTIONS
.TP
\f[V]-v\f[R]
Optional flag to produce verbose output during the conversion process.
.TP
\f[V]-m\f[R]
Optional flag to generate the \f[V].stab\f[R] symbol table map file
associated with \f[I]FILE\f[R].
.TP
\f[V]-k\f[R]
Flag to produce a \f[V].core\f[R] formatted file.
This flag can only be used with an executable file.
A \f[V].stab\f[R] file is automatically produced with this option.
.TP
\f[V]-b\f[R]
Flag to produce a \f[V].rom\f[R] formatted file.
This flag can only be used with an object file that does not contain
relocations.
.TP
\f[V]-a\f[R]
Flag to produce a \f[V].aout\f[R] formatted file.
.PD 0
.P
.PD
This flag can only be used with an executable file.
.SH FILES
.PP
\f[I]FILE\f[R] is the executable or object file to be converted.
.SH AUTHOR
.PP
Mauro Morsiani
.PD 0
.P
.PD
Tomislav Jonjic \f[I]tjonjic\[at]gmail.com\f[R]
.PD 0
.P
.PD
Contributors can be listed on GitHub.
.SH BUGS
.PP
Report issues on GitHub:
\f[I]https://github.com/virtualsquare/umps3\f[R]
.SH SEE ALSO
.PP
\f[B]umps3\f[R](1), \f[B]umps3-mkdev\f[R](1), \f[B]umps3-objdump\f[R](1)
.PP
Full documentation at: \f[I]https://github.com/virtualsquare/umps3\f[R]
.PD 0
.P
.PD
Project wiki: \f[I]https://wiki.virtualsquare.org/#!umps/umps.md\f[R]
.SH COPYRIGHT
.PP
2004, Mauro Morsiani
.PD 0
.P
.PD
2010-2011, Tomislav Jonjic \f[I]tjonjic\[at]gmail.com\f[R]
.PD 0
.P
.PD
